# 任务调度

## React中的任务池
react中有个任务，不同的任务有不同的优先级，为了用户体验，react需要先处理优先级高的任务。
为了存储这些任务，react中有两个任务池，源码中定义如下：
```js
var taskQueue = [];
var timerQueue = [];
```
`taskQueue` 和 `timerQueue`都是数组，前者存储的是立即要执行的任务，而后者存的则是可以延迟执行的任务。源码中任务的初始结构定义如下：
```js
var newTask = {
    id: taskIdCounter++, // 标记任务id
    callback, // 回调函数
    priorityLevel, // 任务优先级
    startTime, // 任务开始时间，时间点
    expirationTime, // 过期时间，时间点
    sortIndex: -1, // 任务排序，取值来自过期时间，因此值越小，优先级越高
  };
```
